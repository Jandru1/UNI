
barber.py



def tractaresdeveniment(self,event)

	if self.state==idle:
		if event.type==cadiralliure:
			no faig res
		if event.type==client:
			state=tallarcabell
			programarfitallat
	if self.state==rentat:
		if event.type==firentat:
			processarcadiralliure
		if event.type==cadiralliure
			norentar

	if self.state==tallat



def programarfitallat():
	calcular temps talllar
	nou event a la llista (temps tallat)
	state=tallat

def processarfitallat()
	si scheduler.hihacadires
		state=esperantcadira
	sino:
		programo fi rentat
 		state=rentat

def programarfirentat():
	calcular tempsrentat
	scheduler.agafounacadira
	nou event a la llista (tempsrentat)

def processarfirentat():
	destruir entitat
	scheduler.deixounacadira
	nou event a la llista (cadiralliure)
	nou event a la llista (cua, surtentitat)


Scheduler.py

barber1=new barber()
barber2=new barber()
barber3=new barber()

int cadira;
hihacadiralliure:booleà
agafarunacadira()
tornarunacadira()


barberlliure=scheduler.barberlliure
if barberlliure!=null
	programarevent(barberlliure,”client”,event.time,event.entitat)

def barberlliure(self)
	if barber1.estalliure:
		return barber1
	if barber3.estalliure:
		return barber3
	if barber2.estalliure:
		return barber2
	return null
